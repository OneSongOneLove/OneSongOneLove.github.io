!function(e){e.searchbox={},e.extend(!0,e.searchbox,{settings:{url:"/search",param:"query",dom_id:"#results",delay:100,loading_css:"#loading"},loading:function(){e(e.searchbox.settings.loading_css).show()},resetTimer:function(e){e&&clearTimeout(e)},idle:function(){e(e.searchbox.settings.loading_css).hide()},process:function(s){var t=e.searchbox.settings.url.split("?"),o=[e.searchbox.settings.param,"=",s].join(""),i=t[0],r=t[1],n=o;r&&(n=[r.replace("&amp;","&"),o].join("&")),e.get([i,"?",n].join(""),function(s){e(e.searchbox.settings.dom_id).html(s)})},start:function(){e(document).trigger("before.searchbox"),e.searchbox.loading()},stop:function(){e.searchbox.idle(),e(document).trigger("after.searchbox")}}),e.fn.searchbox=function(s){e.extend(!0,e.searchbox.settings,s||{});return e(document).trigger("init.searchbox"),e.searchbox.idle(),this.each(function(){var s=e(this);s.focus().ajaxStart(function(){e.searchbox.start()}).ajaxStop(function(){e.searchbox.stop()}).keyup(function(){s.val()!=this.previousValue&&(e.searchbox.resetTimer(this.timer),this.timer=setTimeout(function(){e.searchbox.process(s.val())},e.searchbox.settings.delay),this.previousValue=s.val())})})}}(jQuery);